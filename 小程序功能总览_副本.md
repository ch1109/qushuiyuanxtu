# 唯德优小程序功能总览

> 本文档详细介绍唯德优智能饮水小程序的页面结构、功能模块和导航关系

## 📱 小程序基本信息

- **小程序名称**：唯德优
- **主题色**：蓝色主题 (#1E3A8A)
- **开发框架**：uni-app (支持微信小程序)
- **核心业务**：智能饮水服务、水币充值、水站管理、合伙人系统

---

## 🗺️ 页面导航结构

### 一、底部导航栏（TabBar）

小程序采用三个主要Tab页面作为核心导航：

#### 1. 首页 (`pages/index/index`)
**功能概述**：小程序的主入口，展示核心业务功能和用户水币信息

**主要功能**：
- 顶部轮播广告展示（支持图片和视频）
- 附近推荐水站快速入口（显示距离）
- 用户信息展示（头像、昵称、水币余额）
- VIP会员标识和有效期显示
- 核心操作按钮：
  - 购买水币
  - 分享好友赚水币
  - 扫码取水（调用微信扫一扫）
  - 设备号取水（手动输入设备号）
- 新用户红包弹窗（领取水币奖励）

**跳转关系**：
- → [附近水站](#tab2) (点击推荐水站)
- → [购买水币](#finance-coin) (购买水币按钮)
- → [邀请好友](#invite) (分享好友按钮)
- → [扫码取水](#get-water) (扫一扫功能)
- → [设备号取水](#machine-code) (设备号输入)

---

#### 2. 附近水站 (`pages/station/index`)
**功能概述**：基于地理位置的水站查找和导航服务

**主要功能**：
- 城市/地区切换选择
- 关键词搜索水站
- 附近门店列表（基于距离排序）
  - 显示水站名称、编号
  - 营业时间（24小时制）
  - 详细地址
  - 距离显示
- 常用门店列表（历史访问记录）
- 地图导航功能
- 骨架屏加载优化

**跳转关系**：
- → [水站详情](#station-info) (点击水站)
- → [地图导航](#navigate) (地图导航按钮)
- → [选择地区](#location) (地区选择)
- → [地图视图](#map) (地图模式)

---

#### 3. 我的 (`pages/user/index`)
**功能概述**：个人中心，管理用户信息、水币、订单等

**主要功能**：
- 用户信息区域：
  - 头像、昵称显示
  - VIP会员徽章和有效期
  - 手机号绑定状态
  - 一键绑定手机号（微信授权）
  - 完善资料提示（未完善时显示）
- 水币信息卡片：
  - 剩余水币总数
  - 购买水币、赠送水币、奖励水币分类统计
- 功能菜单入口：
  - 套餐拼团
  - 消费明细
  - 水币钱包
  - 我的设备
  - 意见反馈
  - 合伙人管理
  - 我的团队
  - 设置中心
- 游客模式提示（未登录状态）

**跳转关系**：
- → [套餐拼团](#group) (套餐拼团)
- → [消费明细](#order) (订单列表)
- → [水币钱包](#coin-info) (水币详情)
- → [我的设备](#machine-manage) (设备管理)
- → [意见反馈](#feedback) (反馈页面)
- → [合伙人管理](#partner) (合伙人系统)
- → [我的团队](#team) (团队管理)
- → [设置中心](#setting) (个人设置)

---

## 📂 功能模块详细说明

### 二、公共页面模块 (`pages/public/`)

#### 2.1 用户认证相关

##### 登录页 (`login`)
- 手机号+密码登录
- 验证码登录入口
- 微信一键登录
- 忘记密码功能
- 新用户注册入口
- 用户协议和隐私政策勾选

##### 注册页 (`register`)
- 手机号注册
- 短信验证码验证
- 设置密码
- 邀请码输入（可选）
- 协议同意确认

##### 验证码登录 (`captcha`)
- 手机号验证
- 短信验证码获取
- 快捷登录方式

##### 邀请注册 (`invite-register`)
- 通过邀请链接注册
- 自动填充邀请人信息
- 奖励水币说明

##### 调试登录 (`debuggerLogin`)
- 开发人员调试入口
- 快速登录测试

#### 2.2 协议和结果页面

##### 用户协议 (`user-protocol`)
- 用户服务协议全文
- 法律条款说明

##### 隐私政策 (`privacy-protocol`)
- 隐私权保护说明
- 数据使用规范

##### 支付协议 (`pay-protocol`)
- 支付服务条款
- 退款规则说明

##### 操作结果页 (`result`)
- 通用结果展示页面
- 成功/失败状态显示
- 后续操作引导

---

### 三、拼团系统模块 (`pages/index/group/`)

#### 3.1 拼团主页 (`index`)
**双Tab结构**：发起拼团 / 我的拼团

**发起拼团Tab** (`child/start`):
- 拼团套餐信息展示
  - 团长价格
  - 参团价格
  - 拼团人数要求
  - 有效期说明
- 发起拼团按钮
- 规则说明

**我的拼团Tab** (`child/mine`):
- 我发起的拼团列表
- 我参与的拼团列表
- 拼团状态（进行中/已成功/已失败）
- 邀请好友参团

#### 3.2 拼团详情 (`detail`)
- 拼团进度展示
- 参团成员列表
- 剩余时间倒计时
- 分享邀请功能
- 支付状态

#### 3.3 拼团列表 (`group-list`)
- 全部拼团活动列表
- 可参与的拼团展示
- 筛选和排序

#### 3.4 参与拼团 (`child/join`)
- 加入已有拼团
- 支付参团费用
- 成功提示

---

### 四、水站相关模块 (`pages/station/`)

#### 4.1 水站详情 (`station-info`)
- 水站基本信息
  - 名称、编号
  - 营业时间
  - 联系方式
- 水站位置展示
- 设备列表
- 服务说明
- 导航按钮

#### 4.2 地区选择 (`location`)
- 省市区三级联动
- 当前定位显示
- 历史选择记录

#### 4.3 地图视图 (`map`)
- 地图模式展示水站
- 水站标记点
- 当前位置显示
- 切换列表模式

#### 4.4 地图导航 (`navigate`)
- 调用第三方地图导航
- 支持多种导航App
- 路线规划

---

### 五、财务分包模块 (`finance-package/`)

#### 5.1 水币管理 (`coin/`)

##### 水币信息页 (`coin-info`)
- 水币余额总览
  - 购买水币
  - 赠送水币
  - 奖励水币
- 水币来源统计
- 消费记录入口
- 提现入口

##### 水币明细 (`coin-list`)
- 水币变动记录
- 收入/支出分类
- 时间筛选
- 详细说明

##### 水币详情 (`detail`)
- 单条记录详情
- 交易时间
- 变动类型
- 相关订单

##### 赠送水币 (`present-coin`)
- 选择赠送对象
- 输入赠送数量
- 赠送留言
- 确认赠送

##### 提现列表 (`cash-list`)
- 提现申请记录
- 审核状态
- 到账时间
- 提现金额

##### 提现详情 (`cash-detail`)
- 提现申请详情
- 审核进度
- 银行卡信息
- 拒绝原因（如有）

##### 提现到设备 (`cash-machine`)
- 将水币提现到指定设备
- 设备选择
- 提现数量
- 操作确认

##### 投资详情 (`invest-detail`)
- 投资项目信息
- 收益情况
- 投资时间
- 回本进度

#### 5.2 现金管理 (`cash/`)

##### 购买水币 (`buy`)
- 水币套餐选择
- 支付方式选择
- 优惠活动展示
- 支付确认

##### 提现申请 (`withdrawal`)
- 提现金额输入
- 银行卡选择
- 实时到账金额计算
- 手续费说明
- 提交申请

##### 交易记录 (`record`)
- 充值记录
- 消费记录
- 提现记录
- 时间筛选
- 金额统计

##### 银行卡管理 (`bankList`)
- 已绑定银行卡列表
- 添加银行卡
- 设置默认卡
- 解绑银行卡

---

### 六、合伙人分包模块 (`partner-package/partner/`)

#### 6.1 合伙人主页 (`index`)
- 合伙人身份展示
- 收益统计
- 待办事项提醒
- 功能快捷入口

#### 6.2 合伙人申请系统

##### 统一申请入口 (`unified-apply`)
- 选择合伙人类型
- 填写基本信息
- 上传资质证明

##### 分类型申请页面
- **地址合伙人** (`apply-address`)
  - 管理区域选择
  - 资质上传
  - 保证金说明

- **市场合伙人** (`apply-marketing`)
  - 市场能力证明
  - 团队规模
  - 营销方案

- **投资合伙人** (`apply-invest`)
  - 投资意向
  - 投资金额
  - 收益预期

- **区域合伙人** (`apply-region`)
  - 区域选择
  - 管理能力
  - 发展规划

- **运营合伙人** (`apply-partner`)
  - 运营经验
  - 管理团队
  - 运营方案

- **管理合伙人** (`apply-manager`)
  - 管理经验
  - 团队建设
  - 业绩目标

- **技术合伙人** (`apply-technical`)
  - 技术能力
  - 技术方案
  - 创新规划

##### 身份申请 (`identity-apply`)
- 多身份申请管理
- 申请进度跟踪

##### 申请扩展 (`apply-expansion`)
- 扩展业务范围
- 增加管理区域

#### 6.3 审批管理

##### 审批中心 (`approval-center`)
- 待审批事项列表
- 审批权限管理
- 快速审批入口

##### 申请审批 (`approval`)
- 申请详情查看
- 审批意见填写
- 通过/驳回操作

##### 扩展审批 (`expansion-approval`)
- 区域扩展申请审批
- 设备增加审批
- 业务扩展审批

##### 升级审批 (`upgrade-approval`)
- 合伙人等级升级审批
- 权限变更审批
- 收益比例调整审批

##### 待处理列表
- **地址合伙人待处理** (`address-pending-list`)
- **投资合伙人待处理** (`investor-pending-list`)
- **市场合伙人待处理** (`marketing-pending-list`)
- **我的待处理水站** (`my-pending-stations`)

#### 6.4 水站管理

##### 水站列表 (`station-list`)
- 管辖水站列表
- 运营状态查看
- 收益统计
- 设备管理入口

##### 水站团队 (`station-team`)
- 团队成员管理
- 角色分配
- 业绩统计
- 人员调整

##### 水站绑定 (`station-binding-list`)
- 已绑定设备列表
- 绑定新设备
- 解绑设备
- 设备状态

##### 地址水站申请 (`address-station-apply`)
- 申请新水站
- 选择地址
- 设备配置
- 提交审核

##### 扩展水站 (`expansion-stations`)
- 扩展管理区域
- 新增水站申请
- 扩展进度

##### 绑定设备 (`bind-device`)
- 设备编号绑定
- 设备信息确认
- 绑定关系建立

##### 绑定确认 (`bind-confirmations`)
- 绑定申请确认
- 审核流程
- 确认操作

#### 6.5 市场团队

##### 市场团队首页 (`marketing-team`)
- 团队架构展示
- 成员业绩排行
- 团队总业绩
- 招募新人

##### 我的市场团队 (`marketing-mine`)
- 直属成员列表
- 个人贡献统计
- 奖励记录
- 团队发展

##### 市场团队详情 (`marketing-team-detail`)
- 团队详细信息
- 成员层级关系
- 业绩明细
- 奖励分配

##### 加入市场团队 (`marketing-join`)
- 加入申请
- 团队介绍
- 加入条件
- 提交申请

##### 创建市场团队 (`marketing-create`)
- 团队名称设置
- 团队介绍编辑
- 招募条件设置
- 创建团队

##### 市场详情 (`marketing-detail`)
- 市场活动详情
- 参与规则
- 奖励机制
- 参与记录

#### 6.6 收益管理

##### 合伙人收益 (`partner-revenue`)
- 收益统计图表
- 收益来源分析
- 提现记录
- 收益趋势

##### 分成比例 (`ratio`)
- 各级分成比例展示
- 收益计算规则
- 分成调整记录
- 收益模拟器

#### 6.7 合伙人详情

##### 详情页 (`detail`)
- 合伙人信息
- 管理区域
- 收益概览
- 团队规模

##### 类型选择 (`types`)
- 合伙人类型说明
- 权益对比
- 申请条件
- 选择申请

##### 合伙人类型 (`partner-types`)
- 类型详细说明
- 各类型权益
- 升级路径
- 申请入口

##### 地址合伙人 (`address-partner`)
- 地址合伙人专属功能
- 管理区域详情
- 收益明细
- 业绩统计

---

### 七、用户设置模块 (`setting-package/setting/`)

#### 7.1 设置主页 (`index`)
- 个人信息
- 账号安全
- 支付设置
- 银行卡管理
- 关于我们
- 退出登录

#### 7.2 个人信息管理

##### 信息编辑 (`info`)
- 头像上传
- 昵称修改
- 性别选择
- 生日设置
- 个性签名

##### 用户名修改 (`username`)
- 输入新用户名
- 唯一性验证
- 修改确认

#### 7.3 账号安全

##### 密码修改 (`password`)
- 原密码验证
- 新密码设置
- 确认密码
- 修改提交

##### 手机号修改 (`phone`)
- 原手机号验证
- 新手机号输入
- 验证码验证
- 修改确认

##### 验证码页面 (`captcha`)
- 发送验证码
- 验证码输入
- 倒计时显示
- 重新发送

#### 7.4 支付与银行卡

##### 支付密码 (`pay`)
- 设置支付密码
- 修改支付密码
- 忘记密码找回
- 密码验证

##### 银行卡信息 (`bank`)
- 银行卡号
- 开户行
- 持卡人姓名
- 绑定手机号

##### 添加银行卡 (`addBank`)
- 银行选择
- 卡号输入
- 信息验证
- 绑定确认

##### 银行卡管理 (`bankManage`)
- 已绑定卡列表
- 设置默认卡
- 解绑银行卡
- 添加新卡

---

### 八、订单与反馈模块 (`order-package/`)

#### 8.1 订单管理 (`order/`)

##### 订单列表 (`index`)
- 全部订单
- 订单状态筛选
  - 待支付
  - 已完成
  - 已取消
- 订单搜索
- 时间筛选

##### 订单详情 (`detail`)
- 订单编号
- 订单时间
- 商品信息
- 支付金额
- 订单状态
- 物流信息（如有）
- 售后入口

#### 8.2 团队管理 (`team/`)

##### 团队页面 (`team`)
- 我的团队成员
- 团队业绩统计
- 邀请新成员
- 团队排行榜
- 奖励记录

#### 8.3 意见反馈 (`feedback/`)

##### 反馈页面 (`feedback`)
- 问题类型选择
- 问题描述
- 图片上传
- 联系方式
- 提交反馈
- 反馈记录

---

### 九、设备管理模块 (`pages/user/machine/`)

#### 9.1 设备管理主页 (`machineManage`)
- 我的设备列表
- 设备运行状态
- 收益概览
- 添加设备
- 设备操作

#### 9.2 添加设备 (`addMachine`)
- 设备编号输入
- 设备验证
- 设备信息确认
- 绑定设备

#### 9.3 收益报表

##### 设备收益 (`machine-profit`)
- 单设备收益统计
- 日/周/月收益
- 收益趋势图
- 明细查看

##### 月度收益 (`monthly-profit`)
- 月度收益汇总
- 设备对比
- 同比环比
- 收益分析

##### 收益明细 (`profit-detail`)
- 详细收益记录
- 收益来源
- 时间明细
- 统计图表

##### 收益报告 (`report`)
- 综合收益报告
- 多维度分析
- 数据导出
- 趋势预测

---

### 十、功能辅助模块 (`functional-package/`)

#### 10.1 取水功能 (`getWater`)
- 扫码取水
- 设备号取水
- 取水记录
- 操作引导

#### 10.2 设备编码 (`machineCode`)
- 手动输入设备号
- 设备验证
- 快速取水
- 历史设备

#### 10.3 邀请系统 (`invite/`)

##### 邀请主页 (`index`)
- 邀请二维码
- 邀请链接
- 邀请规则
- 奖励说明
- 已邀请人数

##### 领取水币 (`get-coin`)
- 邀请奖励领取
- 奖励明细
- 领取记录
- 分享海报

---

### 十一、调试工具模块 (`pages/debugger/`)

> 仅供开发和调试使用

#### 11.1 设备管理器 (`machineManager`)
- 设备列表管理
- 设备状态监控
- 参数配置
- 日志查看

#### 11.2 设备编码工具 (`machineCode`)
- 编码生成
- 编码验证
- 批量操作
- 编码查询

#### 11.3 用户信息查看 (`userInfo`)
- 用户详细信息
- 权限查看
- 数据修改
- 状态管理

#### 11.4 搜索工具 (`search`)
- 用户搜索
- 设备搜索
- 订单搜索
- 数据查询

#### 11.5 调试主页 (`debugger`)
- 功能入口
- 环境切换
- 日志查看
- 工具集合

#### 11.6 密码找回 (`forget`)
- 重置密码
- 验证身份
- 安全问题
- 新密码设置

---

### 十二、活动模块 (`pages/activity/`)

#### 12.1 活动详情 (`detail`)
- 活动介绍
- 参与规则
- 奖励机制
- 活动时间
- 参与记录
- 分享功能

---

## 🔄 核心业务流程

### 1. 用户使用流程

```
注册/登录 → 完善信息 → 购买水币 → 扫码/设备号取水 → 消费记录
    ↓
   VIP会员 → 领取红包 → 邀请好友 → 获得奖励水币
```

### 2. 拼团流程

```
选择套餐 → 发起拼团/参与拼团 → 支付费用 → 邀请好友 → 拼团成功 → 获得水币
```

### 3. 合伙人流程

```
申请合伙人 → 选择类型 → 提交资质 → 等待审批 → 审批通过 → 管理区域/团队 → 获得收益
```

### 4. 设备收益流程

```
添加设备 → 设备运营 → 产生收益 → 查看报表 → 收益提现
```

---

## 📊 技术特点

### 1. 页面结构
- **主包页面**：25个核心页面
- **分包结构**：6个分包模块
  - finance-package (财务分包)
  - partner-package (合伙人分包)
  - setting-package (设置分包)
  - order-package (订单分包)
  - station-package (水站分包)
  - functional-package (功能分包)

### 2. 性能优化
- 分包加载策略
- 骨架屏加载
- 图片懒加载
- 缓存机制

### 3. 用户体验
- 微信授权登录
- 一键绑定手机号
- 地理位置服务
- 扫码功能
- 分享功能
- 支付集成

### 4. 权限管理
- 定位权限
- 相机权限
- 相册权限
- 微信登录授权

---

## 🎨 页面统计

| 模块 | 页面数量 | 说明 |
|------|---------|------|
| 主包核心页面 | 25 | 包含首页、水站、用户等 |
| 财务分包 | 12 | 水币和现金管理 |
| 合伙人分包 | 42 | 合伙人全流程管理 |
| 设置分包 | 9 | 个人设置和安全 |
| 订单分包 | 4 | 订单和团队管理 |
| 水站分包 | 4 | 水站查找和导航 |
| 功能分包 | 3 | 取水和邀请功能 |
| **总计** | **99+** | 完整功能覆盖 |

---

## 🔗 外部集成

1. **微信生态**
   - 微信登录
   - 微信支付
   - 分享功能
   - 扫一扫
   - 定位服务

2. **地图服务**
   - 定位获取
   - 地图导航
   - 路线规划

3. **支付系统**
   - 微信支付
   - 银行卡绑定
   - 提现功能

---

## 📝 页面命名规范

- 主页面：直接功能名称 (如 `index`, `login`, `register`)
- 详情页：功能名-detail (如 `coin-detail`, `order-detail`)
- 列表页：功能名-list (如 `coin-list`, `cash-list`)
- 申请页：apply-类型 (如 `apply-partner`, `apply-address`)
- 管理页：功能名-manage (如 `machineManage`, `bankManage`)

---

## 🎯 核心价值主张

1. **便捷取水**：扫码或设备号快速取水
2. **水币系统**：充值、赠送、奖励多种获取方式
3. **拼团优惠**：团购模式降低使用成本
4. **合伙人体系**：多层级合作共赢模式
5. **智能管理**：设备收益可视化管理
6. **社交裂变**：邀请奖励机制促进传播

---

## 📱 用户角色体系

1. **普通用户**：购买水币、取水消费
2. **VIP会员**：享受折扣、每日领红包
3. **设备所有者**：管理设备、获得运营收益
4. **团队管理者**：建设团队、获得团队收益
5. **各类合伙人**：
   - 地址合伙人
   - 市场合伙人
   - 投资合伙人
   - 区域合伙人
   - 运营合伙人
   - 管理合伙人
   - 技术合伙人

---

*文档生成时间：2025-12-20*
*版本：V1.0*
*维护者：技术团队*
